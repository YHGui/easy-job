## 列式存储

### 什么是列式存储

- 主流的事务型数据库(OLTP)大多采用行式存储,随着分析型数据库(OLAP)的兴起,列式存储有了用武之地
- 行式存储:所有列依次排列构成一行,以行为单位存储,再配合B+树或SS-Table作为索引,可以快速通过主键找到相应的行数据
  - 适用场景:大多数操作都以实体为单位,大多为增删改查一整行记录,因此架构一行数据存在物理上相邻的位置是个更好的选择
  - 优点:写入一次性完成,保持数据完整性
  - 缺点:数据读取过程中产生冗余数据,若有少量数据可以忽略
- 列式存储:同一列数据被一个接一个紧挨着存放在一起,表的每列构成一个长数组
  - 适用场景:OLAP场景,典型查询如:遍历整个表,进行分组,排序,聚合等操作.同时分析型Sql常常不会用到所有的列,仅仅是对其中的某些列感兴趣并做运算.
  - 适用查询语句只涉及部分列,只需要扫面相关列,同时每一列的数据都是相同类型,彼此间相关性更大,对列数据压缩效率更高.
  - 优点:读取过程不会产生冗余数据,特别适合对数据完整性要求不高的大数据领域
  - 缺点:写入效率差,保证数据完整性差

